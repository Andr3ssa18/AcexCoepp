<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendamentos - Psicologia</title>
    <style>
        body {
          font-family: 'Inter', sans-serif;
          background: linear-gradient(135deg, #074276 0%, #0a56a0 100%);
          margin: 0;
          padding: 0;
          min-height: 100vh; 
          background-attachment: fixed; 
          color: white;
        }

        body.modal-active {
            overflow: hidden;
        }

        header {
            background-color: #ffffff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 30px;
            border-bottom: 2px solid #004a91;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 2px;
        }

        .logo span {
            background-color: #004a91;
            color: white;
            font-weight: bold;
            font-size: 30px;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            color: #004a91;
        }

        .profile {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
            color: #004a91;
            cursor: pointer;
            position: relative;
        }

        .profile span {
            background-color: #004a91;
            color: white;
            font-weight: bold;
            font-size: 20px;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .dropdown {
            display: none;
            position: absolute;
            top: 60px;
            right: 0;
            background: linear-gradient(to bottom, #ffffff, #86b9e8);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            z-index: 1001;
            min-width: 200px;
            animation: fadeIn 0.3s ease-in-out;
        }

        .dropdown::before {
            content: "Nome do Paciente";
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
            color: #004a91;
        }

        .dropdown a {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #004a91;
            font-weight: bold;
            text-decoration: none;
            margin-bottom: 10px;
        }

        .dropdown a:last-child {
            margin-bottom: 0;
            text-decoration: underline;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .main-title {
            text-align: center;
            font-size: 26px;
            font-weight: bold;
            color: #d6eaff; 
            font-weight: 600; 
            letter-spacing: 0.5px;
            margin: 30px 0;
        }

        .card-container {
            max-width: 800px;
            margin: 0 auto 30px auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding: 0 15px;
        }

        .card {
            background: linear-gradient(to right, #ffffff, #cce5ff);
            border: 1px solid #004a91;
            border-radius: 8px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .card-info h3 {
            margin: 0;
            font-size: 22px;
            font-weight: bold;
            color: #004a91;
        }

        .card-info p {
            margin: 5px 0 0;
            font-size: 16px;
            color: #004a91;
            font-weight: bold;
        }

        .card button {
            background-color: #004a91;
            color: white;
            font-weight: bold;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }

        .card button:hover {
            background-color: #003366;
        }

        .page {
            display: none;
            padding-bottom: 50px; 
        }

        .page.active {
            display: block;
        }

        .horarios-container {
            background-color: #f0f8ff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: 30px auto;
            padding: 20px;
            width: 90%;
            max-width: 600px;
        }

        .horarios-header {
            background-color: #ffffff;
            padding: 15px;
            border-radius: 8px;
            border-bottom: 2px solid #004a91;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .horarios-header-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .horarios-header-info h2 {
            color: #004a91;
            font-size: 24px;
            margin: 0;
            font-weight: bold;
        }

        .horarios-header-info p {
            color: #004a91;
            font-size: 16px;
            margin: 0;
        }

        .horarios-profile-icon {
            background-color: #004a91;
            color: white;
            font-weight: bold;
            font-size: 20px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .availability-title {
            color: #004a91;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .availability-subtitle {
            color: #004a91;
            font-size: 16px;
            margin-bottom: 15px;
        }

        .date-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .date-selector label {
            color: #004a91;
            font-weight: bold;
        }

        .date-input {
            padding: 8px;
            border: 1px solid #004a91;
            border-radius: 5px;
            font-size: 16px;
            width: 150px;
        }

        .time-slot-group {
            margin-bottom: 15px;
        }

        .time-slot-header {
            background-color: #86b9e8;
            color: #004a91;
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: bold;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .time-slot-header svg {
            fill: #004a91;
            width: 18px;
            height: 18px;
        }

        .time-slot-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .time-slot-button {
            background-color: #ffffff;
            color: #004a91;
            border: 1px solid #004a91;
            border-radius: 5px;
            padding: 8px 15px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .time-slot-button:hover:not(:disabled) {
            background-color: #cce5ff;
        }

        .time-slot-button.selected {
            background-color: #003366;
            color: white;
            border-color: #003366;
        }
        .time-slot-button:disabled {
            background-color: #e0e0e0;
            color: #a0a0a0;
            cursor: not-allowed;
            border-color: #c0c0c0;
        }

        .action-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .action-button {
            background-color: #004a91;
            color: white;
            font-weight: bold;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            text-decoration: none;
        }

        .action-button:hover {
            background-color: #003366;
        }

        .back-button {
            background-color: transparent;
            color: #004a91;
            border: none;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: bold;
            text-decoration: none;
        }

        .back-button svg {
            fill: #004a91;
            width: 24px;
            height: 24px;
        }

        .info-footer {
            margin-top: 30px;
            color: #004a91;
            font-size: 14px;
            text-align: center;
        }

        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: linear-gradient(to bottom, #ffffff, #e6f2ff);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 500px;
            text-align: left;
            color: #004a91;
            animation: slideInModal 0.4s ease-out;
        }
        
        @keyframes slideInModal {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-content h2 {
            font-size: 22px;
            font-weight: bold;
            color: #004a91;
            text-align: center;
            margin-top: 0;
            margin-bottom: 20px;
        }
        .modal-content h3 {
            font-size: 18px;
            font-weight: bold;
            color: #004a91;
            margin-top: 20px;
            margin-bottom: 10px;
            border-top: 1px solid #86b9e8;
            padding-top: 15px;
        }

        .modal-content p {
            font-size: 16px;
            margin: 8px 0;
            line-height: 1.5;
        }
        .modal-content p strong {
            font-weight: bold;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            margin-top: 15px;
            margin-bottom: 20px;
        }
        .checkbox-container input[type="checkbox"] {
            margin-right: 8px;
            accent-color: #004a91;
            width: 18px;
            height: 18px;
        }
        .checkbox-container label {
            font-size: 15px;
            color: #004a91;
        }

        .modal-action-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 25px;
        }

        .modal-back-button {
            background-color: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
        }
        .modal-back-button svg {
            fill: #004a91;
            width: 30px;
            height: 30px;
        }
        .modal-back-button:hover svg {
            fill: #003366;
        }

        .modal-confirm-button {
            background-color: #004a91;
            color: white;
            font-weight: bold;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        .modal-confirm-button:hover {
            background-color: #003366;
        }


        #pagina-confirmacao-final {
            text-align: center;
            padding: 30px 20px;
            max-width: 600px;
            margin: 30px auto;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            color: #004a91;
            animation: fadeIn 0.5s ease-out;
        }
        #pagina-confirmacao-final h2 {
            font-size: 28px;
            font-weight: bold;
            color: #004a91;
            margin-bottom: 25px;
        }
        #pagina-confirmacao-final p {
            font-size: 17px;
            line-height: 1.6;
            margin: 10px 0;
        }
        #pagina-confirmacao-final .confirmacao-detalhes {
            margin-bottom: 25px;
            text-align: left;
            padding: 15px;
            background-color: #f0f8ff;
            border-radius: 8px;
            border: 1px solid #cce5ff;
        }
        #pagina-confirmacao-final .confirmacao-detalhes strong {
            font-weight: bold;
        }
        #pagina-confirmacao-final .qr-code-placeholder {
            width: 150px;
            height: 150px;
            background-color: #e0e0e0;
            margin: 25px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #757575;
            border: 1px dashed #004a91;
            border-radius: 5px;
        }
   
        #pagina-confirmacao-final .qr-code-placeholder svg {
            width: 100px;
            height: 100px;
            fill: #004a91;
        }

        #pagina-confirmacao-final .confirmacao-info-adicional {
            font-size: 15px;
            color: #004a91; 
            margin-top: 20px;
            margin-bottom: 30px;
        }
        #pagina-confirmacao-final .confirmacao-voltar-button {
            background-color: #004a91;
            color: white;
            font-weight: bold;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            text-decoration: none;
            transition: background-color 0.3s ease;
        }
        #pagina-confirmacao-final .confirmacao-voltar-button:hover {
            background-color: #003366;
        }

        #pagina-ajuda {
            list-style-type: none;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #004a91;
        }
        #pagina-ajuda ul li strong {
        color: #003366;
        }

        .page-header {
            position: relative;
            text-align: center;
            margin-bottom: 30px;
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
        }

        /* Loading spinner */
        .spinner {
            display: none;
            width: 40px;
            height: 40px;
            margin: 20px auto;
            border: 4px solid rgba(0, 74, 145, 0.3);
            border-radius: 50%;
            border-top: 4px solid #004a91;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                padding: 15px;
                gap: 15px;
            }
            
            .title {
                font-size: 20px;
                text-align: center;
            }
            
            .profile {
                margin-top: 10px;
            }
            
            .card {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .horarios-container {
                width: 95%;
                padding: 15px;
            }
            
            .time-slot-buttons {
                justify-content: center;
            }
        }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #004a91;
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1001;
            opacity: 0;
            transition: opacity 0.3s ease;
        } 

        .action-buttons {
            display: flex;
            justify-content: flex-end; /* Alinha à direita */
            gap: 15px; /* Espaço entre os botões */
            margin-top: 30px;
        }


        .voltar-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background-color: transparent;
            color: #004a91;
            border: 2px solid #004a91;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-right: auto;
        }

        .voltar-button:hover {
            background-color: rgba(0, 74, 145, 0.1);
        }

        .voltar-button svg {
            fill: #004a91;
            width: 18px;
            height: 18px;
        }
        .toast.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <header>
       <div class="logo">
    <span style="font-family: 'Times New Roman', Times, serif;">F</span>
    <span style="font-family: 'Times New Roman', Times, serif;">S</span>
    <span style="font-family: 'Times New Roman', Times, serif;">A</span>
        </div>
        <div class="title">Agendamentos - Psicologia</div>
        <div class="profile" onclick="toggleDropdown()">
            <div>Olá, Paciente</div>
            <span>P</span>
            <div class="dropdown" id="dropdownMenu">
                <a href="#" onclick="mostrarPagina('pagina-consultas')"><span>📅</span>Minhas Consultas</a>
                <a href="#"><span>👤</span>Minha Conta</a>
                <a href="#" onclick="mostrarPagina('pagina-ajuda')"><span>❓</span>Ajuda</a>
                <a href="{{ url_for('tela_login') }}"><span>↩️</span>Sair da Conta</a>
            </div>
        </div>
    </header>

    <div id="pagina-principal" class="page active">
        <div class="main-title">Estagiários Disponíveis</div>
        <div class="card-container">
            <div class="card">
                <div class="card-info">
                    <h3>Mario Lima</h3>
                    <p>Estudante de Psicologia no 6º semestre</p>
                </div>
                <button onclick="mostrarPagina('pagina-horarios-mario-lima')">Visualizar Horários</button>
            </div>
            <div class="card">
                <div class="card-info">
                    <h3>Lucas Melo</h3>
                    <p>Estudante de Psicologia no 6º semestre</p>
                </div>
                <button onclick="mostrarPagina('pagina-horarios-lucas-melo')">Visualizar Horários</button>
            </div>
        </div>
    </div>

    <div id="pagina-consultas" class="page">
      <div style="display: flex; justify-content: space-between; align-items: center; padding: 0 20px; margin-bottom: 20px;">
        <button onclick="mostrarPagina('pagina-principal')" 
                style="background: #004a91; 
                       color: white;
                       border: none;
                       padding: 10px 20px;
                       border-radius: 50px;
                       font-weight: bold;
                       display: flex;
                       align-items: center;
                       gap: 8px;
                       cursor: pointer;
                       box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                       transition: all 0.3s ease;">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="white">
                <path d="M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"/>
            </svg>
            VOLTAR
        </button>  
         <div class="main-title">Minhas Consultas</div>
         <div style="width: 100px;"></div>
      </div>
        <div class="card-container" id="container-meus-agendamentos">
            <div class="card">
                <div class="card-info">
                    <h3>Manhã - 13/05/2025</h3>
                    <p>12:00 - Mario Lima</p>
                </div>
                <button onclick="mostrarDetalhesConsulta(this)">Detalhes</button>
            </div>
        </div>
    </div>

    <div id="pagina-horarios-mario-lima" class="page">
        <div class="horarios-container">
            <div class="horarios-header">
                <div class="horarios-header-info">
                    <h2>Mario Lima</h2>
                    <p>Estudante de Psicologia no 6º semestre</p></div>
                <div class="horarios-profile-icon">M</div>
            </div>
            <h2 class="availability-title">Horários Disponíveis</h2>
            <p class="availability-subtitle">Selecione data e horário para criar o agendamento</p>
            <div class="date-selector">
                <label for="date-mario-lima">Data:</label>
                <input type="date" id="date-mario-lima" class="date-input" value="2025-05-17" min="2025-05-17" max="2025-06-30">
            </div>
            <div class="time-slot-group">
                <div class="time-slot-header">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"/></svg>Manhã
                </div>
                <div class="time-slot-buttons">
                    <button class="time-slot-button" onclick="selecionarHorario('Mario Lima', 'Manhã', '09:00', event)">09:00</button>
                    <button class="time-slot-button" onclick="selecionarHorario('Mario Lima', 'Manhã', '10:00', event)">10:00</button>
                    <button class="time-slot-button" onclick="selecionarHorario('Mario Lima', 'Manhã', '11:00', event)">11:00</button>
                    <button class="time-slot-button" onclick="selecionarHorario('Mario Lima', 'Manhã', '12:00', event)">12:00</button>
                </div>
            </div>
            <div class="time-slot-group">
                 <div class="time-slot-header">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"/></svg>Tarde
                </div>
                <div class="time-slot-buttons">
                    <button class="time-slot-button" onclick="selecionarHorario('Mario Lima', 'Tarde', '14:00', event)">14:00</button>
                    <button class="time-slot-button" onclick="selecionarHorario('Mario Lima', 'Tarde', '15:00', event)">15:00</button>
                    <button class="time-slot-button" onclick="selecionarHorario('Mario Lima', 'Tarde', '16:00', event)">16:00</button>
                     <button class="time-slot-button" onclick="selecionarHorario('Mario Lima', 'Tarde', '21:00', event)">21:00</button> </div>
            </div>
            <div class="action-buttons">
    <a href="#" class="voltar-button" onclick="mostrarPagina('pagina-principal'); limparSelecaoAtual()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"/>
        </svg>
        Voltar
    </a>
    <button class="action-button" onclick="abrirModalResumo()">Agendar</button>
</div>
        </div>
    </div>
    
    <div id="pagina-horarios-lucas-melo" class="page">
        <div class="horarios-container">
            <div class="horarios-header">
                <div class="horarios-header-info">
                    <h2>Lucas Melo</h2>
                    <p>Estudante de Psicologia no 6º semestre</p></div>
                <div class="horarios-profile-icon">L</div>
            </div>
            <h2 class="availability-title">Horários Disponíveis</h2>
            <p class="availability-subtitle">Selecione data e horário para criar o agendamento</p>
            <div class="date-selector">
                <label for="date-lucas-melo">Data:</label>
                <input type="date" id="date-lucas-melo" class="date-input" value="2025-05-17" min="2025-05-17" max="2025-06-30">
            </div>
            <div class="time-slot-group">
                <div class="time-slot-header">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"/></svg>Tarde
                </div>
                <div class="time-slot-buttons">
                     <button class="time-slot-button" onclick="selecionarHorario('Lucas Melo', 'Tarde', '16:00', event)">16:00</button>
                     <button class="time-slot-button" onclick="selecionarHorario('Lucas Melo', 'Tarde', '17:00', event)">17:00</button>
                </div>
            </div>
         <div class="action-buttons">
    <a href="#" class="voltar-button" onclick="mostrarPagina('pagina-principal'); limparSelecaoAtual()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"/>
        </svg>
        Voltar
    </a>
    <button class="action-button" onclick="abrirModalResumo()">Agendar</button>
</div>
        </div>
    </div>
    <div id="modal-resumo-agendamento" class="modal-overlay">
        <div class="modal-content">
            <h2>Resumo do Atendimento</h2>
            <p><strong>Estagiário/a:</strong> <span id="resumo-estagiario"></span></p>
            <p><strong>Data:</strong> <span id="resumo-data"></span></p>
            <p><strong>Horário:</strong> <span id="resumo-horario"></span></p>
            <p><strong>Tipo:</strong> 
                <select id="resumo-tipo" style="margin-left: 10px; padding: 5px; border: 1px solid #004a91; border-radius: 5px;">
                    <option value="Presencial">Presencial</option>
                    <option value="Online">Online</option>
                </select>
            </p>
            <p><strong>Local:</strong> <span id="resumo-local">Sala 12, COEPP - Fundação Santo André</span></p>
            <h3>Seus Dados</h3>
            <p><strong>Nome:</strong> <span id="resumo-paciente-nome">Paciente Padrão</span></p>
            <p><strong>Email:</strong> <span id="resumo-paciente-email">paciente@email.com</span></p>
            <p><strong>Telefone:</strong> <span id="resumo-paciente-telefone">(11) 99999-8888</span></p>
            <div class="checkbox-container">
                <input type="checkbox" id="resumo-whatsapp" checked>
                <label for="resumo-whatsapp">Quero receber Lembrete por WhatsApp</label>
            </div>
            <div class="modal-action-buttons">
                <button class="modal-back-button" onclick="fecharModalResumo()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"/></svg>
                </button>
                <button class="modal-confirm-button" onclick="finalizarAgendamento()">CONFIRMAR AGENDAMENTO</button>
            </div>
        </div>
    </div>

    <div id="pagina-confirmacao-final" class="page"> <h2>Agendamento Confirmado!</h2>
        <div class="confirmacao-detalhes">
            <p><strong>Estagiário/a:</strong> <span id="confirmacao-estagiario"></span></p>
            <p><strong>Data:</strong> <span id="confirmacao-data"></span></p>
            <p><strong>Horário:</strong> <span id="confirmacao-horario"></span></p>
            <p><strong>Tipo:</strong> <span id="confirmacao-tipo"></span></p>
            <p><strong>Local:</strong> <span id="confirmacao-local"></span></p>
        </div>
        <div class="qr-code-placeholder">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 10 H 40 V 40 H 10 Z M15 15 V 35 H 35 V 15 Z M60 10 H 90 V 40 H 60 Z M65 15 V 35 H 85 V 15 Z M10 60 H 40 V 90 H 10 Z M15 65 V 85 H 35 V 65 Z M50 50 H 70 V 70 H 50 Z M75 45 H 95 V 65 H 75 Z M45 75 H 65 V 95 H 45 Z M70 70 H 90 V 90 H 70Z"/>
            </svg>
        </div>
        <p class="confirmacao-info-adicional">Se precisar reagendar ou cancelar, acesse o menu Minhas Consultas.</p>
        <button class="confirmacao-voltar-button" onclick="voltarParaInicioAposConfirmacao()">VOLTAR</button>
    </div>

    <div id="pagina-ajuda" class="page">
    <div class="main-title">Ajuda</div>
    <div class="horarios-container" style="max-width: 800px;">
        <h2 style="color: #004a91; text-align: center; margin-bottom: 30px;">
            Precisa de ajuda? Confira abaixo as perguntas mais comuns e suas respostas.
        </h2>

        <!-- Acesso e Cadastro -->
        <div class="time-slot-group" style="border: none; margin-bottom: 30px;">
            <div class="time-slot-header" style="background-color: #004a91; color: white;">
                📝 Acesso e Cadastro
            </div>
            <ul style="color: #004a91; padding-left: 20px; font-size: 16px;">
                <li style="margin-bottom: 15px;">
                    <strong>Como faço meu primeiro acesso?</strong><br>
                    <span style="font-size: 14px;">Clique em "Sou novo aqui" na tela de login e siga os passos para cadastro.</span>
                </li>
                <li style="margin-bottom: 15px;">
                    <strong>Esqueci minha senha. O que devo fazer?</strong><br>
                    <span style="font-size: 14px;">Clique em "Esqueci minha senha" no login para redefinição por e-mail.</span>
                </li>
                <li style="margin-bottom: 15px;">
                    <strong>Posso alterar meus dados de cadastro depois?</strong><br>
                    <span style="font-size: 14px;">Sim, acesse "Minha Conta" no menu do perfil.</span>
                </li>
                <li style="margin-bottom: 15px;">
                    <strong>Sou estagiário, como recebo acesso à plataforma?</strong><br>
                    <span style="font-size: 14px;">O coordenador do COEPP enviará suas credenciais por e-mail.</span>
                </li>
            </ul>
        </div>

        <!-- Agendamento -->
        <div class="time-slot-group" style="border: none; margin-bottom: 30px;">
            <div class="time-slot-header" style="background-color: #004a91; color: white;">
                🗓️ Agendamento
            </div>
            <ul style="color: #004a91; padding-left: 20px; font-size: 16px;">
                <li style="margin-bottom: 15px;">
                    <strong>Como agendar um atendimento?</strong><br>
                    <span style="font-size: 14px;">Selecione um estagiário na página inicial e escolha data/horário disponível.</span>
                </li>
                <li style="margin-bottom: 15px;">
                    <strong>Como sei se meu agendamento foi confirmado?</strong><br>
                    <span style="font-size: 14px;">Você receberá um e-mail e aparecerá em "Minhas Consultas".</span>
                </li>
                <li style="margin-bottom: 15px;">
                    <strong>Posso reagendar ou cancelar uma consulta?</strong><br>
                    <span style="font-size: 14px;">Sim, em "Minhas Consultas" clique em "Detalhes" para opções.</span>
                </li>
                <li style="margin-bottom: 15px;">
                    <strong>Como vejo meus atendimentos futuros?</strong><br>
                    <span style="font-size: 14px;">Acesse a aba "Minhas Consultas" no menu.</span>
                </li>
            </ul>
        </div>

        <!-- Atendimento -->
        <div class="time-slot-group" style="border: none; margin-bottom: 20px;">
            <div class="time-slot-header" style="background-color: #004a91; color: white;">
                🏥 Atendimento
            </div>
            <ul style="color: #004a91; padding-left: 20px; font-size: 16px;">
                <li style="margin-bottom: 15px;">
                    <strong>Onde os atendimentos são realizados?</strong><br>
                    <span style="font-size: 14px;">Sala 12, COEPP - Fundação Santo André (presencial) ou online via link enviado por e-mail.</span>
                </li>
                <li style="margin-bottom: 15px;">
                    <strong>A clínica possui atendimento online?</strong><br>
                    <span style="font-size: 14px;">Sim, selecione "Online" ao agendar e receberá um link do Google Meet.</span>
                </li>
                <li style="margin-bottom: 15px;">
                    <strong>O que preciso levar no dia do atendimento?</strong><br>
                    <span style="font-size: 14px;">Documento com foto e comprovante de agendamento (e-mail ou QR Code).</span>
                </li>
            </ul>
        </div>

        <!-- Botão de contato -->
        <div style="text-align: center; margin-top: 40px;">
            <p style="color: #004a91; font-size: 16px;">
                Ainda com dúvidas? <a href="mailto:suporte@coepp.com.br" style="color: #004a91; font-weight: bold;">Entre em contato conosco</a>.
            </p>
        </div>

         <div style="text-align: center; margin-top: 40px;">
    <button class="action-button" onclick="mostrarPagina('pagina-principal')" style="margin: 0 auto;">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" style="margin-right: 8px; vertical-align: middle;">
            <path d="M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z" fill="white"/>
        </svg>
        Voltar
    </button>
</div>
    </div>
</div>

    <!-- Modal de detalhes da consulta -->
    <div id="modal-detalhes-consulta" class="modal-overlay">
        <div class="modal-content">
            <h2>Detalhes da Consulta</h2>
            <div id="detalhes-consulta-conteudo">
    
            </div>
            <div class="modal-action-buttons" style="justify-content: center;">
                <button class="modal-confirm-button" onclick="fecharModalDetalhes()">FECHAR</button>
            </div>
        </div>
    </div>

    <div id="toast-notification" class="toast"></div>

    <div id="loading-spinner" class="spinner"></div>

    <script>
        let dadosHorarioSelecionado = null; 
        let botaoHorarioAtivo = null; 
        let consultasAgendadas = [
            {
                estagiario: "Mario Lima",
                data: "2025-05-13",
                periodo: "Manhã",
                hora: "12:00",
                tipo: "Presencial",
                local: "Sala 12, COEPP - Fundação Santo André"
            }
        ];

        function toggleDropdown() {
            const dropdown = document.getElementById('dropdownMenu');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        }

        window.onclick = function(event) {
            const dropdown = document.getElementById('dropdownMenu');
            const profile = document.querySelector('.profile');
            if (dropdown && profile && !profile.contains(event.target) && dropdown.style.display === 'block') {
                dropdown.style.display = 'none';
            }
        }

        function mostrarPagina(idPagina) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            const paginaAtiva = document.getElementById(idPagina);
            if (paginaAtiva) {
                paginaAtiva.classList.add('active');
            }
       
            if (!idPagina.startsWith('pagina-horarios-')) {
                 limparSelecaoAtual();
            }
            fecharModalResumo();
            document.body.classList.remove('modal-active');
            
            // Se for a página de consultas, atualiza a lista
            if (idPagina === 'pagina-consultas') {
                atualizarListaConsultas();
            }
        }
        
        function formatarDataParaExibicao(dataString) {
            if (!dataString) return '';
            const [ano, mes, dia] = dataString.split('-');
            return `${dia}/${mes}/${ano}`;
        }

        function calcularHoraFim(horaInicio) {
            if (!horaInicio) return '';
            const [horas, minutos] = horaInicio.split(':').map(Number);
            const data = new Date();
            data.setHours(horas, minutos, 0, 0);
            data.setHours(data.getHours() + 1); // Adiciona 1 hora
            return `${String(data.getHours()).padStart(2, '0')}:${String(data.getMinutes()).padStart(2, '0')}`;
        }

        function selecionarHorario(estagiario, periodo, hora, evento) {
            const targetButton = evento.target;
            const containerHorarios = targetButton.closest('.horarios-container');
            const dataInput = containerHorarios.querySelector('.date-input');
            const dataSelecionada = dataInput.value;

            dadosHorarioSelecionado = {
                estagiario: estagiario,
                periodo: periodo,
                hora: hora,
                data: dataSelecionada,
                local: "Sala 12, COEPP - Fundação Santo André", 
                tipo: "Presencial"
            };

            if (botaoHorarioAtivo && botaoHorarioAtivo !== targetButton) {
                botaoHorarioAtivo.classList.remove('selected');
            }
            targetButton.classList.add('selected');
            botaoHorarioAtivo = targetButton;
        }

        function limparSelecaoAtual() {
            if (botaoHorarioAtivo) {
                botaoHorarioAtivo.classList.remove('selected');
                botaoHorarioAtivo = null;
            }
            dadosHorarioSelecionado = null;
            const paginaHorariosAtiva = document.querySelector('.page.active .horarios-container');
            if (paginaHorariosAtiva) {
                paginaHorariosAtiva.querySelectorAll('.time-slot-button').forEach(button => {
                    button.disabled = false;
                });
            }
        }
        
        function desabilitarBotoesHorario() {
            const paginaHorariosAtiva = document.querySelector('.page.active .horarios-container');
            if (paginaHorariosAtiva) {
                paginaHorariosAtiva.querySelectorAll('.time-slot-button').forEach(button => {
                    if (button !== botaoHorarioAtivo) { 
                         button.disabled = true;
                    }
                });
            }
        }

        function habilitarBotoesHorario() {
             const paginaHorariosAtiva = document.querySelector('.page.active .horarios-container');
            if (paginaHorariosAtiva) {
                paginaHorariosAtiva.querySelectorAll('.time-slot-button').forEach(button => {
                    button.disabled = false;
                });
            }
        }

        function abrirModalResumo() {
            if (!dadosHorarioSelecionado) {
                mostrarToast('Por favor, selecione um horário antes de agendar.');
                return;
            }

            document.getElementById('resumo-estagiario').textContent = dadosHorarioSelecionado.estagiario;
            document.getElementById('resumo-data').textContent = formatarDataParaExibicao(dadosHorarioSelecionado.data);
            const horaFim = calcularHoraFim(dadosHorarioSelecionado.hora);
            document.getElementById('resumo-horario').textContent = `${dadosHorarioSelecionado.hora} - ${horaFim}`;
            document.getElementById('resumo-tipo').value = dadosHorarioSelecionado.tipo;
            document.getElementById('resumo-local').textContent = dadosHorarioSelecionado.local;
            
            const modal = document.getElementById('modal-resumo-agendamento');
            modal.classList.add('active');
            document.body.classList.add('modal-active');
            desabilitarBotoesHorario();
        }

        function fecharModalResumo() {
            const modal = document.getElementById('modal-resumo-agendamento');
            modal.classList.remove('active');
            document.body.classList.remove('modal-active');
            habilitarBotoesHorario();
        }

        function mostrarLoading(mostrar) {
            const spinner = document.getElementById('loading-spinner');
            spinner.style.display = mostrar ? 'block' : 'none';
        }

        function mostrarToast(mensagem) {
            const toast = document.getElementById('toast-notification');
            toast.textContent = mensagem;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function finalizarAgendamento() {
            if (!dadosHorarioSelecionado) { 
                mostrarToast('Ocorreu um erro. Nenhum horário selecionado.');
                fecharModalResumo();
                return;
            }

            dadosHorarioSelecionado.tipo = document.getElementById('resumo-tipo').value;
            
            // Simula processamento
            mostrarLoading(true);
            
            setTimeout(() => {
                mostrarLoading(false);
            
                document.getElementById('confirmacao-estagiario').textContent = dadosHorarioSelecionado.estagiario;
                document.getElementById('confirmacao-data').textContent = formatarDataParaExibicao(dadosHorarioSelecionado.data);
                const horaFim = calcularHoraFim(dadosHorarioSelecionado.hora);
                document.getElementById('confirmacao-horario').textContent = `${dadosHorarioSelecionado.hora} - ${horaFim}`;
                document.getElementById('confirmacao-tipo').textContent = dadosHorarioSelecionado.tipo;
                document.getElementById('confirmacao-local').textContent = 
                    dadosHorarioSelecionado.tipo === 'Online' ? 'Link será enviado por e-mail' : dadosHorarioSelecionado.local;
                
                // Adiciona à lista de consultas
                consultasAgendadas.push({
                    estagiario: dadosHorarioSelecionado.estagiario,
                    data: dadosHorarioSelecionado.data,
                    periodo: dadosHorarioSelecionado.periodo,
                    hora: dadosHorarioSelecionado.hora,
                    tipo: dadosHorarioSelecionado.tipo,
                    local: dadosHorarioSelecionado.tipo === 'Online' ? 'Online' : dadosHorarioSelecionado.local
                });
                
                fecharModalResumo();
                mostrarPagina('pagina-confirmacao-final');
                mostrarToast('Agendamento confirmado com sucesso!');
            }, 1500);
        }

        function atualizarListaConsultas() {
            const container = document.getElementById('container-meus-agendamentos');
            if (!container) return;
            
            // Limpa consultas existentes
            while (container.children.length > 1) {
                container.removeChild(container.lastChild);
            }
            
            // Ordena consultas pela data (mais recente primeiro)
            consultasAgendadas.sort((a, b) => new Date(b.data) - new Date(a.data));
            
            // Ta add as consultas
            consultasAgendadas.forEach(consulta => {
                const card = document.createElement('div');
                card.className = 'card';
                
                const cardInfo = document.createElement('div');
                cardInfo.className = 'card-info';
                
                const tituloAgendamento = document.createElement('h3');
                tituloAgendamento.textContent = `${consulta.periodo} - ${formatarDataParaExibicao(consulta.data)}`;
                
                const detalhesAgendamento = document.createElement('p');
                detalhesAgendamento.textContent = `${consulta.hora} - ${consulta.estagiario} (${consulta.tipo})`;
                
                cardInfo.appendChild(tituloAgendamento);
                cardInfo.appendChild(detalhesAgendamento);
                
                const botaoDetalhes = document.createElement('button');
                botaoDetalhes.textContent = 'Detalhes';
                botaoDetalhes.onclick = function() {
                    mostrarDetalhesConsulta(this, consulta);
                };
                
                card.appendChild(cardInfo);
                card.appendChild(botaoDetalhes);
                
                container.appendChild(card);
            });
        }

        function mostrarDetalhesConsulta(botao, consulta) {
            if (!consulta) {
             
                consulta = {
                    estagiario: "Mario Lima",
                    data: "2025-05-13",
                    periodo: "Manhã",
                    hora: "12:00",
                    tipo: "Presencial",
                    local: "Sala 12, COEPP - Fundação Santo André"
                };
            }
            
            const modal = document.getElementById('modal-detalhes-consulta');
            const conteudo = document.getElementById('detalhes-consulta-conteudo');
            
            conteudo.innerHTML = `
                <p><strong>Estagiário/a:</strong> ${consulta.estagiario}</p>
                <p><strong>Data:</strong> ${formatarDataParaExibicao(consulta.data)}</p>
                <p><strong>Horário:</strong> ${consulta.hora} - ${calcularHoraFim(consulta.hora)}</p>
                <p><strong>Tipo:</strong> ${consulta.tipo}</p>
                <p><strong>Local:</strong> ${consulta.local}</p>
                <p><strong>Status:</strong> Confirmado</p>
                
                <h3 style="margin-top: 20px;">Ações</h3>
                <div style="display: flex; gap: 10px; margin-top: 15px;">
                    <button class="action-button" style="background-color: #e74c3c;" onclick="cancelarConsulta('${consulta.data}', '${consulta.hora}')">Cancelar</button>
                    <button class="action-button" style="background-color: #f39c12;">Reagendar</button>
                </div>
            `;
            
            modal.classList.add('active');
            document.body.classList.add('modal-active');
        }

        function fecharModalDetalhes() {
            const modal = document.getElementById('modal-detalhes-consulta');
            modal.classList.remove('active');
            document.body.classList.remove('modal-active');
        }

        function cancelarConsulta(data, hora) {
            if (confirm('Tem certeza que deseja cancelar esta consulta?')) {
                // Remove da lista de consultas
                consultasAgendadas = consultasAgendadas.filter(c => 
                    !(c.data === data && c.hora === hora));
                
                mostrarToast('Consulta cancelada com sucesso.');
                fecharModalDetalhes();
                atualizarListaConsultas();
            }
        }

        function voltarParaInicioAposConfirmacao() {
            mostrarPagina('pagina-principal');
            limparSelecaoAtual();
        }

        document.addEventListener('DOMContentLoaded', () => {
            mostrarPagina('pagina-principal');
            
            // Configura datas minimas e maximas nos date inputs
            const hoje = new Date();
            const dataMinima = hoje.toISOString().split('T')[0];
            
            const umMesAFrente = new Date();
            umMesAFrente.setMonth(umMesAFrente.getMonth() + 1);
            const dataMaxima = umMesAFrente.toISOString().split('T')[0];
            
            document.querySelectorAll('.date-input').forEach(input => {
                input.min = dataMinima;
                input.max = dataMaxima;
            });
        });

    </script>
</body>
</html>